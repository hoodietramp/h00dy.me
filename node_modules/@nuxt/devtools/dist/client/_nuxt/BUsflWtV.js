import{d as me,r as q,bE as Se,o as u,m as _,k as c,G as F,h as x,f as e,bF as re,t as O,p as N,v as K,a9 as We,aa as Ke,F as L,n as J,a6 as Te,by as $e,bz as Re,w as Ee,bv as Qe,bG as Xe,bH as Ye,az as Ze,bI as et,ab as tt,av as ot,ax as fe,a as E,ac as nt,aA as st,a$ as at,bJ as rt,e as lt,a2 as je,j as w,l as Y,i as m,I as Z,au as it,ak as De,V as ut,_ as Ve,X as ct,A as Ie,bB as dt,bK as pt,ah as ft,U as mt,bL as vt,ap as ht}from"./Bb1mULLQ.js";import{_ as yt}from"./BMzBLMig.js";import{_ as Ue}from"./BullEKkw.js";import{_ as _t}from"./CkNuW12v.js";import{_ as Oe}from"./chB0bF2e.js";import{_ as gt}from"./BitKOBNg.js";import{_ as bt}from"./iwQAEmKI.js";import{_ as kt}from"./iazTOtp7.js";import{C as ke,S as Ne}from"./BcJws1i5.js";import{U as wt}from"./C_8Nqh_D.js";import{_ as Ct}from"./BKuBdopT.js";import{_ as xt}from"./BpcRrzbR.js";import"./A4ZOcguv.js";import"./CUmEcBOj.js";import"./CA_eAFlo.js";const ae=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function St(t,r){if(typeof t!="string")throw new TypeError("argument str must be a string");const n={},h=(r||{}).decode||Rt;let v=0;for(;v<t.length;){const d=t.indexOf("=",v);if(d===-1)break;let f=t.indexOf(";",v);if(f===-1)f=t.length;else if(f<d){v=t.lastIndexOf(";",d-1)+1;continue}const a=t.slice(v,d).trim();if(n[a]===void 0){let S=t.slice(d+1,f).trim();S.codePointAt(0)===34&&(S=S.slice(1,-1)),n[a]=$t(S,h)}v=f+1}return n}function we(t,r,n){const o=n||{},h=o.encode||Et;if(typeof h!="function")throw new TypeError("option encode is invalid");if(!ae.test(t))throw new TypeError("argument name is invalid");const v=h(r);if(v&&!ae.test(v))throw new TypeError("argument val is invalid");let d=t+"="+v;if(o.maxAge!==void 0&&o.maxAge!==null){const f=o.maxAge-0;if(Number.isNaN(f)||!Number.isFinite(f))throw new TypeError("option maxAge is invalid");d+="; Max-Age="+Math.floor(f)}if(o.domain){if(!ae.test(o.domain))throw new TypeError("option domain is invalid");d+="; Domain="+o.domain}if(o.path){if(!ae.test(o.path))throw new TypeError("option path is invalid");d+="; Path="+o.path}if(o.expires){if(!Tt(o.expires)||Number.isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");d+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(d+="; HttpOnly"),o.secure&&(d+="; Secure"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():o.priority){case"low":d+="; Priority=Low";break;case"medium":d+="; Priority=Medium";break;case"high":d+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;case"none":d+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return d}function Tt(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}function $t(t,r){try{return r(t)}catch{return t}}function Rt(t){return t.includes("%")?decodeURIComponent(t):t}function Et(t){return encodeURIComponent(t)}function M(t){if(typeof t!="object")return t;var r,n,o=Object.prototype.toString.call(t);if(o==="[object Object]"){if(t.constructor!==Object&&typeof t.constructor=="function"){n=new t.constructor;for(r in t)t.hasOwnProperty(r)&&n[r]!==t[r]&&(n[r]=M(t[r]))}else{n={};for(r in t)r==="__proto__"?Object.defineProperty(n,r,{value:M(t[r]),configurable:!0,enumerable:!0,writable:!0}):n[r]=M(t[r])}return n}if(o==="[object Array]"){for(r=t.length,n=Array(r);r--;)n[r]=M(t[r]);return n}return o==="[object Set]"?(n=new Set,t.forEach(function(h){n.add(M(h))}),n):o==="[object Map]"?(n=new Map,t.forEach(function(h,v){n.set(M(v),M(h))}),n):o==="[object Date]"?new Date(+t):o==="[object RegExp]"?(n=new RegExp(t.source,t.flags),n.lastIndex=t.lastIndex,n):o==="[object DataView]"?new t.constructor(M(t.buffer)):o==="[object ArrayBuffer]"?t.slice(0):o.slice(-6)==="Array]"?new t.constructor(t):t}const jt=c("div",{"x-divider":""},null,-1),Ae=me({__name:"ServerRouteListItem",props:{item:{},index:{default:0}},setup(t){const r=q(!0),n=Se();return(o,h)=>{const v=Te,d=Ue,f=Ae;return u(),_("div",null,[c("button",{flex:"~ gap-2","w-full":"","items-start":"","items-center":"","hover-bg-active":"",px2:"",py1:"",class:F([{"bg-active":e(n)===o.item.filepath}]),style:We({paddingLeft:`calc(0.5rem + ${o.index*1.5}em)`}),onClick:h[0]||(h[0]=a=>{r.value=!e(r),n.value=o.item.filepath})},[c("div",{class:F({"w-12":!o.item.routes}),"flex-none":"","text-left":""},[o.item.type==="collection"?(u(),x(v,{key:0,icon:"carbon:chevron-right","mb0.5":"","transform-rotate":e(r)?90:0,transition:""},null,8,["transform-rotate"])):(u(),x(d,{key:1,class:F(("getRequestMethodClass"in o?o.getRequestMethodClass:e(re))(o.item.method||"*")),textContent:O((o.item.method||"*").toUpperCase())},null,8,["class","textContent"]))],2),c("span",{class:F({"flex items-center":o.item.routes}),"text-sm":"","font-mono":""},[o.item.type==="collection"?(u(),x(v,{key:0,title:`${o.item.routes?.length} routes`,icon:"carbon:folder",mr1:""},null,8,["title"])):N("",!0),K(" "+O(o.item.route),1)],2)],6),jt,e(r)?Ke(o.$slots,"default",{key:0},()=>[(u(!0),_(L,null,J(o.item.routes,a=>(u(),x(f,{key:a.filepath,item:a,index:o.index+1},null,8,["item","index"]))),128))]):N("",!0)])}}}),Dt={path:"/",watch:!0,decode:t=>Xe(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))},Vt=void 0;function It(t,r){const n={...Dt,...r},o=Ce(n)||{};let h;n.maxAge!==void 0?h=n.maxAge*1e3:n.expires&&(h=n.expires.getTime()-Date.now());const v=h!==void 0&&h<=0,d=M(v?void 0:o[t]??n.default?.()),f=h&&!v?Nt(d,h,n.watch&&n.watch!=="shallow"):q(d);{let a=null;try{!Vt&&typeof BroadcastChannel<"u"&&(a=new BroadcastChannel(`nuxt:cookies:${t}`))}catch{}const S=()=>{n.readonly||Ye(f.value,o[t])||(Ot(t,f.value,n),o[t]=M(f.value),a?.postMessage({value:n.encode(f.value)}))},V=z=>{const ee=z.refresh?Ce(n)?.[t]:n.decode(z.value);A=!0,o[t]=f.value=ee,Ze(()=>{A=!1})};let A=!1;$e()&&Re(()=>{A=!0,S(),a?.close()}),a&&(a.onmessage=({data:z})=>V(z)),n.watch?Ee(f,()=>{A||S()},{deep:n.watch!=="shallow"}):S()}return f}function Ce(t={}){return St(document.cookie,t)}function Ut(t,r,n={}){return r==null?we(t,r,{...n,maxAge:-1}):we(t,r,n)}function Ot(t,r,n={}){document.cookie=Ut(t,r,n)}const xe=2147483647;function Nt(t,r,n){let o,h,v=0;const d=n?q(t):{value:t};return $e()&&Re(()=>{h?.(),clearTimeout(o)}),Qe((f,a)=>{n&&(h=Ee(d,a));function S(){clearTimeout(o);const V=r-v,A=V<xe?V:xe;o=setTimeout(()=>{if(v+=A,v<r)return S();d.value=void 0,a()},A)}return{get(){return f(),d.value},set(V){S(),d.value=V,a()}}})}const At={"h-full":"","w-full":"",flex:"~ col"},Lt={flex:"~ col gap-2","flex-none":"",p4:"","n-navbar-glass":""},qt={flex:"~ gap2 items-center"},Pt={relative:"","w-full":""},Bt={absolute:"","right-2":"","top-1.5":"",flex:"~ gap-1"},Mt={flex:"~ gap2 wrap","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},Ft={class:"hidden md:block"},zt=c("div",{"flex-auto":""},null,-1),Ht=c("div",{"text-xs":"",op50:""}," Send from ",-1),Gt=c("option",{value:"app"}," App ",-1),Jt=c("option",{value:"devtools"}," DevTools ",-1),Wt={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},Kt={"text-right":"","font-mono":""},Qt={key:1,border:"b base",p4:"",flex:"~ col gap-4","font-mono":""},Xt={flex:"~ gap-4"},Yt={flex:"~ gap2","mb--2":"","items-center":"",op50:""},Zt=c("div",{"w-5":"","x-divider":""},null,-1),eo=c("div",{"flex-none":""}," Default Inputs ",-1),to=c("div",{"x-divider":""},null,-1),oo={key:2},no={key:3,border:"b base",relative:"","n-code-block":""},so={flex:"~ wrap","w-full":""},ao=["onClick"],ro=c("div",{border:"b base","flex-auto":""},null,-1),lo={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},io=c("div",null,"Response",-1),uo={key:1,"text-xs":"",op50:""},co=c("div",{"flex-auto":""},null,-1),po=c("div",{op50:""}," Request finished in ",-1),fo={key:0,"flex-auto":"","overflow-auto":""},mo={border:"~ base","h-full":"","w-full":"",rounded:""},vo=["data"],ho={key:2,"flex-auto":"","overflow-auto":"",p4:""},yo={border:"~ base",rounded:""},_o=["src"],go={key:1,controls:"",rounded:""},bo=["src"],ko=me({__name:"ServerRouteDetails",props:{route:{}},emits:["open-default-input"],setup(t,{emit:r}){const n=t,o=r,[h,v]=et(),d=tt(),f=ot(),a=fe({contentType:"text/plain",data:"",statusCode:200,error:void 0,fetchTime:0}),S=E(()=>a.contentType.includes("application/json")?"json":a.contentType.includes("text/html")?"html":a.contentType.includes("text/css")?"css":a.contentType.includes("text/javascript")?"javascript":a.contentType.includes("image")||a.contentType.includes("video")?"media":a.contentType.includes("text/xml")||a.contentType.includes("application/xml")?"xml":a.contentType.includes("application/pdf")?"pdf":"text"),V=E(()=>{if(S.value==="json")return JSON.stringify(a.data,null,2);if(S.value==="media"||S.value==="pdf"){const s=new Blob([a.data],{type:a.contentType});return URL.createObjectURL(s)}return a.data}),A=q(!1),z=q(!1),ee=nt(),j=E(()=>n.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),g=E(()=>j.value?.filter(s=>s.startsWith(":")||s.startsWith("**:"))||[]),I=q(n.route.method||"GET"),b=q({}),y=fe({query:[{active:!0,key:"",value:"",type:"string"}],body:[{active:!0,key:"",value:"",type:"string"}],headers:[{active:!0,key:"Content-Type",value:"application/json",type:"string"}]}),D=q({}),{inputDefaults:T,sendFrom:U}=De("serverRoutes"),P=E(()=>f?.value?.app?.$fetch?U.value:"devtools"),le=["GET","POST","PUT","PATCH","DELETE","HEAD"],ie=["PATCH","POST","PUT","DELETE"],te=E(()=>ie.includes(I.value.toUpperCase())),k=q(),$=["input","json"],H=q($[0]),oe=E({get:()=>y[k.value],set:s=>{y[k.value]=s}}),ve=E(()=>({...W(T.value.query),...W(y.query)})),he=E(()=>({...W(T.value.headers),...W(y.headers)})),ue=E(()=>te.value?H.value==="json"?{...W(T.value.body),...D.value}:{...W(T.value.body),...W(y.body)}:void 0),Le=E(()=>{let s=window?.location.origin;return s.charAt(s.length-1)==="/"&&(s=s.slice(0,-1)),s}),ne=E(()=>{let s=new URLSearchParams(ve.value).toString();s&&(s=`?${s}`);const i=(j.value?.map(R=>(R.startsWith(":")||R.startsWith("**:"))&&b.value[R]||R).join("")||"")+s;let p=d.value?.app.baseURL||"";return(p==="./"||p===".")&&(p=""),p.endsWith("/")&&(p=p.slice(0,-1)),p+i}),ye=E(()=>Le.value+ne.value);function W(s){const i=Object.fromEntries(s.filter(({active:p,key:R,value:C})=>p&&R&&C!==void 0).map(({key:p,value:R})=>[p,R]));return Object.entries(i).length?i:void 0}async function _e(){z.value=!0,A.value=!0;const s=Date.now(),i=P.value==="app"?f.value.app.$fetch:$fetch;ut("server-routes:fetch",{method:I.value,sendFrom:P.value});try{a.data=await i(ye.value,{method:I.value.toUpperCase(),headers:he.value,query:ve.value,body:ue.value,onResponse({response:p}){a.contentType=(p.headers.get("content-type")||"").toString().toLowerCase().trim(),a.statusCode=p.status,a.error=void 0},onResponseError(p){a.error=p.response._data,a.data=p.response._data}})}catch{}A.value=!1,a.fetchTime=Date.now()-s}const ge=E(()=>{const s=[],i=[],p=Object.entries(he.value).filter(([C,B])=>C&&B&&!(C==="Content-Type"&&B==="application/json")).map(([C,B])=>`  '${C}': '${B}'`).join(`,
`);I.value.toUpperCase()!=="GET"&&i.push(`method: '${I.value.toUpperCase()}'`),p&&i.push(`headers: {
${p}
}`),ue.value&&i.push(`body: ${JSON.stringify(ue.value,null,2)}`);const R=i.length?`, {
${i.join(`,
`).split(`
`).map(C=>`  ${C}`).join(`
`)}
}`:"";return s.push({name:"useFetch",lang:"javascript",docs:ke.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${ne.value}'${R})`}),s.push({name:"$fetch",lang:"javascript",docs:ke.nuxt.$fetch,code:`await $fetch('${ne.value}'${R})`}),s}),Q=q(Pe()),G=fe({key:"",value:""}),qe=E(()=>{const s=[];return g.value.length&&s.push({name:"Params",slug:"params",length:g.value.length}),s.push({name:"Query",slug:"query",length:y.query.length}),te.value&&s.push({name:"Body",slug:"body",length:y.body.length}),s.push({name:"Headers",slug:"headers",length:y.headers.length}),s.push({name:"Cookies",slug:"cookies",length:Q.value.length}),s.push({name:"Snippets",slug:"snippet"}),s});function Pe(){return document.cookie.split("; ").map(s=>{const[i,p]=s.split("=");return{key:i,value:p}}).filter(s=>s.key)}function ce(s,i){if(!s)return;const p=Q.value.find(C=>C.key===s),R=It(s);p!==void 0?i===void 0&&(Q.value=Q.value.filter(C=>C.key!==s)):(Q.value.push({key:s,value:i}),G.key="",G.value=""),R.value=i}st(()=>{H.value==="json"&&typeof D.value=="string"&&(D.value=JSON.parse(D.value))});const de=at("nuxt-devtools:server-routes:inputs",()=>[],{window:window.parent});rt([y,k],()=>{const s=de.value?.find(i=>i.path===n.route.filepath);if(s){k.value||(k.value=s.tab),s.tab!==k.value&&(s.tab=k.value);const{body:i,query:p,headers:R,params:C}=s.inputs;Object.assign(y,{body:i,query:p,headers:R}),b.value=C}else{const i={path:n.route.filepath,tab:g.value.length?"params":"query",inputs:{...y,...g.value.length?{params:b.value}:{}}};de.value.push(i),k.value||(k.value=i.tab)}},{immediate:!0,deep:!0,debounce:500});function Be(){de.value=[],y.body=[],y.query=[],y.headers=[],b.value={},k.value=g.value.length?"params":"query"}const Me=lt();return(s,i)=>{const p=Ve,R=_t,C=ct,B=Te,be=Oe,Fe=gt,ze=Ie,He=dt,pe=Ue,Ge=bt,Je=kt,se=je("tooltip");return u(),_("div",At,[c("div",Lt,[c("div",qt,[s.route.method?(u(),x(p,{key:0,class:F(["n-badge-base n-sm",("getRequestMethodClass"in s?s.getRequestMethodClass:e(re))(e(I))]),"pointer-events-none":"","font-mono":"",tabindex:"-1"},{default:w(()=>[K(O(e(I).toUpperCase()),1)]),_:1},8,["class"])):(u(),x(R,{key:1,modelValue:e(I),"onUpdate:modelValue":i[0]||(i[0]=l=>Y(I)?I.value=l:null),class:F(["n-badge-base n-sm",("getRequestMethodClass"in s?s.getRequestMethodClass:e(re))(e(I))])},{default:w(()=>[(u(),_(L,null,J(le,l=>c("option",{key:l,class:F(("getRequestMethodClass"in s?s.getRequestMethodClass:e(re))(l))},O(l.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),c("div",Pt,[m(C,{"model-value":e(ne),readonly:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"sm"},null,8,["model-value"]),c("div",Bt,[Z(m(p,{title:"Copy URL",n:"xs blue",icon:"carbon:copy",border:!1,onClick:i[1]||(i[1]=l=>e(Me)(e(ye),"server-route-url"))},null,512),[[se,"Copy URL"]]),Z(m(p,{title:"Open in Editor",icon:"carbon-launch",n:"xs blue",border:!1,onClick:i[2]||(i[2]=l=>e(ee)(s.route.filepath))},null,512),[[se,"Open in Editor"]])])]),m(p,{"h-full":"",n:"primary solid",onClick:_e},{default:w(()=>[m(B,{icon:"carbon:send"})]),_:1})])]),c("div",Mt,[(u(!0),_(L,null,J(e(qe),l=>Z((u(),x(p,{key:l.slug,class:F(e(k)===l.slug?"text-primary n-primary":"border-transparent shadow-none"),onClick:X=>k.value=l.slug},{default:w(()=>[m(B,{icon:("ServerRouteTabIcons"in s?s.ServerRouteTabIcons:e(Ne))[l.slug]},null,8,["icon"]),c("div",Ft,[K(O(l.name)+" "+O(l?.length?`(${l.length})`:"")+" ",1),c("span",null,O(e(T)[l.slug]?.length?`(${e(T)[l.slug].length})`:""),1)])]),_:2},1032,["class","onClick"])),[[se,l.name]])),128)),zt,Ht,m(R,{modelValue:e(P),"onUpdate:modelValue":i[3]||(i[3]=l=>Y(P)?P.value=l:null),class:"n-xs",disabled:!e(f)?.app?.$fetch},{default:w(()=>[Gt,Jt]),_:1},8,["modelValue","disabled"]),Z(m(p,{n:"orange",class:"p-3",icon:"i-carbon-clean",onClick:Be},null,512),[[se,"Clear Inputs Saved Cache"]])]),e(k)==="params"?(u(),_("div",Wt,[(u(!0),_(L,null,J(e(g),l=>(u(),_(L,{key:l},[c("div",Kt,O(l),1),m(C,{modelValue:e(b)[l],"onUpdate:modelValue":X=>e(b)[l]=X,placeholder:l,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):N("",!0),e(k)==="cookies"?(u(),_("div",Qt,[(u(!0),_(L,null,J(e(Q),l=>(u(),_("div",{key:l.key,flex:"~ gap-4 items-center"},[m(C,{placeholder:"Key...","model-value":l.key,disabled:"","op-70":""},null,8,["model-value"]),m(C,{placeholder:"Value...","model-value":l.value,"flex-1":"",n:"primary",onInput:X=>ce(l.key,X.target?.value)},null,8,["model-value","onInput"]),m(p,{title:"Delete",n:"red",onClick:X=>ce(l.key,void 0)},{default:w(()=>[m(B,{icon:"i-carbon-trash-can"})]),_:2},1032,["onClick"])]))),128)),c("div",Xt,[m(C,{modelValue:e(G).key,"onUpdate:modelValue":i[4]||(i[4]=l=>e(G).key=l),placeholder:"Key",n:"primary","flex-1":""},null,8,["modelValue"]),m(C,{modelValue:e(G).value,"onUpdate:modelValue":i[5]||(i[5]=l=>e(G).value=l),placeholder:"Value",n:"primary","flex-1":""},null,8,["modelValue"]),m(p,{title:"Add",n:"primary",onClick:i[6]||(i[6]=l=>ce(e(G).key,e(G).value))},{default:w(()=>[m(B,{icon:"i-carbon-save"})]),_:1})])])):N("",!0),m(e(h),null,{default:w(()=>[m(be,{modelValue:e(oe),"onUpdate:modelValue":i[9]||(i[9]=l=>Y(oe)?oe.value=l:null),default:{active:!0,type:"string"},"max-h-xs":"","of-auto":""},{default:w(()=>[e(T)[e(k)]?.length?(u(),_(L,{key:0},[c("div",Yt,[Zt,eo,m(p,{icon:"i-carbon-edit",border:!1,onClick:i[7]||(i[7]=l=>o("open-default-input"))}),to]),m(be,{modelValue:e(T)[e(k)],"onUpdate:modelValue":i[8]||(i[8]=l=>e(T)[e(k)]=l),disabled:"",p0:""},null,8,["modelValue"])],64)):N("",!0)]),_:1},8,["modelValue"])]),_:1}),e(k)==="snippet"?(u(),_("div",oo,[e(ge).length?(u(),x(Fe,{key:0,"code-snippets":e(ge)},null,8,["code-snippets"])):N("",!0)])):e(oe)?(u(),_("div",no,[e(k)==="body"?(u(),_(L,{key:0},[c("div",so,[(u(),_(L,null,J($,l=>c("button",{key:l,px4:"",py2:"",border:"r base",hover:"bg-active",class:F({"border-b":l!==e(H)}),onClick:X=>H.value=l},[c("div",{class:F({op30:l!==e(H)}),"font-mono":""},O(l),3)],10,ao)),64)),ro]),e(H)==="input"?(u(),x(e(v),{key:0})):e(H)==="json"?(u(),x(e(wt),it({key:1,modelValue:e(D),"onUpdate:modelValue":i[10]||(i[10]=l=>Y(D)?D.value=l:null),class:[[s.$colorMode.value==="dark"?"jse-theme-dark":"light"],"json-editor-vue of-auto text-sm outline-none"]},s.$attrs,{mode:"text","navigation-bar":!1,indentation:2,"tab-size":2}),null,16,["modelValue","class"])):N("",!0)],64)):(u(),x(e(v),{key:1}))])):N("",!0),e(z)?e(A)?(u(),x(He,{key:5,"z-10":"","flex-auto":"","backdrop-blur":""},{default:w(()=>[K(" Fetching... ")]),_:1})):(u(),_(L,{key:6},[c("div",lo,[io,e(a).error?(u(),x(pe,{key:0,n:"red"},{default:w(()=>[K(" Error ")]),_:1})):N("",!0),m(pe,{n:e(a).error?"orange":"green",textContent:O(e(a).statusCode)},null,8,["n","textContent"]),e(a).contentType?(u(),_("code",uo,O(e(a).contentType),1)):N("",!0),e(a).contentType==="application/json"?(u(),x(Ge,{key:2,getter:()=>({input:e(V)})},null,8,["getter"])):N("",!0),co,po,m(pe,{n:"green"},{default:w(()=>[K(O(e(a).fetchTime)+" ms ",1)]),_:1})]),e(S)==="pdf"?(u(),_("div",fo,[c("div",mo,[c("object",{data:e(V),type:"application/pdf","flex-auto":"",width:"100%",height:"100%",rounded:""},null,8,vo)])])):e(S)!=="media"?(u(),x(Je,{key:1,"flex-auto":"","overflow-auto":"","py-2":"",code:e(V),lang:e(S)},null,8,["code","lang"])):(u(),_("div",ho,[c("div",yo,[e(a).contentType.includes("image")?(u(),_("img",{key:0,rounded:"",src:e(V)},null,8,_o)):(u(),_("video",go,[c("source",{src:e(V),type:"video/mp4"},null,8,bo)]))])]))],64)):(u(),x(ze,{key:4},{default:w(()=>[m(p,{n:"primary",onClick:_e},{default:w(()=>[m(B,{icon:"carbon:send"}),K(" Send request ")]),_:1})]),_:1}))])}}}),wo={flex:"~ gap1","text-sm":""},Co={key:0,op50:""},xo={op50:""},So=c("span",{op75:""},"Select a route to start",-1),To=c("div",{p4:"",border:"b base"},[c("span",{"text-lg":""},"Default Inputs"),c("br"),c("span",{"text-white":"",op50:""},"Merged as default for every request in DevTools")],-1),Mo=me({__name:"server-routes",setup(t){const r=q(!1),n=pt(),o=Se(),{selectedRoute:h,view:v,inputDefaults:d}=De("serverRoutes"),f=E(()=>{!o.value&&h.value&&(o.value=h.value.filepath);const j=n.value?.find(g=>g.filepath===o.value);return o.value!==h.value?.filepath&&j&&(h.value=j),j}),a=q(""),S=E(()=>new ft(n.value||[],{keys:["method","route"],shouldSort:!0})),V=E(()=>n.value?a.value?S.value.search(a.value).map(g=>g.item):n.value:[]),A=E(()=>{const j=[],g=(b,y)=>{b.routes=b.routes||[],b.routes.push(y)},I=(b,y)=>{const D=y?y.routes?.find(U=>U.route===b):j.find(U=>U.route===b);if(D)return D;const T={route:b,filepath:b.replace(/\W/g,"-").toLowerCase(),type:"collection",routes:[]};return y?g(y,T):j.push(T),T};return V.value.forEach(b=>{let y,D;const T=b.filepath.split("/"),U=T.slice(T.indexOf("server")+1);if(b.type==="runtime"){U[0]="runtime";const P=T.indexOf("dist");P!==-1&&(y=T[P-1],y&&U.splice(1,0,y))}U.length>0&&U[U.length-1].includes(".")&&U.pop(),U.forEach(P=>{D=I(P,D)}),D?g(D,b):j.push(b)}),j});function z(){v.value=v.value==="tree"?"list":"tree"}function ee(j){return j.charAt(0).toUpperCase()+j.slice(1)}return(j,g)=>{const I=Ve,b=yt,y=Ae,D=ko,T=ht,U=Ie,P=mt,le=Oe,ie=Ct,te=xt,k=je("tooltip");return u(),_(L,null,[m(P,{"storage-key":"tab-server-routes"},{left:w(()=>[m(b,{search:e(a),"onUpdate:search":g[1]||(g[1]=$=>Y(a)?a.value=$:null),pb2:""},{actions:w(()=>[Z(m(I,{"text-lg":"",icon:e(v)==="list"?"i-carbon-list":"i-carbon-tree-view-alt",title:"Toggle view",border:!1,onClick:z},null,8,["icon"]),[[k,"Toggle View"]]),Z(m(I,{"text-lg":"",icon:"i-carbon-cics-sit-overrides",title:"Default Inputs",border:!1,onClick:g[0]||(g[0]=$=>r.value=!e(r))},null,512),[[k,"Default Inputs"]])]),default:w(()=>[c("div",wo,[e(a)?(u(),_("span",Co,O(e(V).length)+" matched · ",1)):N("",!0),c("span",xo,O(e(n)?.length)+" routes in total",1)])]),_:1},8,["search"]),(u(!0),_(L,null,J(e(v)==="tree"?e(A):e(V),$=>(u(),x(y,{key:$.filepath,item:$},null,8,["item"]))),128))]),right:w(()=>[(u(),x(vt,{max:10},[e(f)?(u(),x(D,{key:e(f).filepath,route:e(f),onOpenDefaultInput:g[2]||(g[2]=$=>r.value=!0)},null,8,["route"])):N("",!0)],1024)),e(f)?N("",!0):(u(),x(U,{key:0},{default:w(()=>[m(T,{px6:"",py2:""},{default:w(()=>[So]),_:1})]),_:1}))]),_:1}),m(te,{modelValue:e(r),"onUpdate:modelValue":g[3]||(g[3]=$=>Y(r)?r.value=$:null),"auto-close":"","max-w-xl":"","min-w-xl":"",onClose:g[4]||(g[4]=$=>r.value=!1)},{default:w(()=>[c("div",null,[To,(u(!0),_(L,null,J(Object.keys(e(d)),$=>(u(),x(ie,{key:$,text:`${ee($)} ${e(d)[$].length?`(${e(d)[$].length})`:""}`,padding:!1,icon:("ServerRouteTabIcons"in j?j.ServerRouteTabIcons:e(Ne))[$]},{default:w(()=>[m(le,{modelValue:e(d)[$],"onUpdate:modelValue":H=>e(d)[$]=H,py0:"",default:{active:!0,type:"string"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["text","icon"]))),128))])]),_:1},8,["modelValue"])],64)}}});export{Mo as default};
